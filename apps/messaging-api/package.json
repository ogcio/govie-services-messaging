{
  "name": "messaging-api",
  "version": "1.0.0",
  "description": "",
  "main": "dist/index.js",
  "scripts": {
    "test": "NODE_OPTIONS='--import tsx' vitest run --reporter junit --reporter default --coverage --outputFile=results.xml",
    "test:local": "NODE_OPTIONS='--import tsx' vitest",
    "test:e2e": "cd ./e2e && bru run --env local",
    "test:smoke:e2e": "echo \"Error: no test specified\" && exit 0",
    "test:regression:e2e": "echo \"Error: no test specified\" && exit 0",
    "test:ci-disabled:e2e": "cd ./e2e && mkdir -p test-results && bru run --env dev --output ./test-results/results.xml --format junit",
    "test:nf:disabled": "mkdir -p test_reports && mkdir -p test_reports/perf && k6 version && k6 run perf/script.js ./test_reports/perf/",
    "test:nf": "mkdir -p test_reports && mkdir -p test_reports/perf && echo \"Error: no test specified\" && exit 0",
    "test:nf:local": "mkdir -p test_reports && mkdir -p test_reports/perf && cat perf/script.js | docker run --name loadtest -i grafana/k6 run - && docker cp loadtest:/home/k6/LoadTestReport.html ./reports/ && docker stop loadtest && docker rm loadtest",
    "dev": "FASTIFY_AUTOLOAD_TYPESCRIPT=1 node --watch --import tsx src/index.ts | pino-pretty",
    "start": "node --env-file=.env --import ./dist/instrumentation.js dist/index.js",
    "format": "biome check --write",
    "lint": "biome check",
    "build": "rm -rf dist && tsc -p tsconfig.prod.json && cp -R src/public dist/public && cp -R src/migrations/sql dist/migrations/sql",
    "db:create": "tsx --env-file=.env ./src/migrations/scripts/run-create-database.ts",
    "db:drop": "tsx --env-file=.env ./src/migrations/scripts/run-drop-database.ts",
    "db:migrate": "tsx --env-file=.env ./src/migrations/scripts/run-migrate-database.ts",
    "sync-event-summary": "tsx --env-file=.env ./src/migrations/scripts/run-sync-event-summary.ts",
    "sync-event-summary:full-resync": "tsx --env-file=.env ./src/migrations/scripts/run-sync-event-summary.ts -- --full-resync",
    "db:rollback": "tsx --env-file=.env ./src/migrations/scripts/run-migrate-database.ts -- version=0",
    "db:create-ci": "node ./dist/migrations/scripts/run-create-database.js",
    "db:migrate-ci": "node ./dist/migrations/scripts/run-migrate-database.js",
    "sync-event-summary-ci": "node ./dist/migrations/scripts/run-sync-event-summary.js",
    "sync-event-summary-ci:full-resync": "node ./dist/migrations/scripts/run-sync-event-summary.js -- --full-resync"
  },
  "type": "module",
  "author": "",
  "license": "ISC",
  "dependencies": {
    "@aws-sdk/client-sns": "^3.848.0",
    "@cacheable/node-cache": "^1.6.0",
    "@fastify/autoload": "^6.3.1",
    "@fastify/env": "^5.0.2",
    "@fastify/postgres": "^6.0.2",
    "@fastify/sensible": "^6.0.3",
    "@fastify/swagger": "^9.5.1",
    "@fastify/swagger-ui": "^5.2.3",
    "@fastify/type-provider-typebox": "^5.2.0",
    "@fastify/under-pressure": "^9.0.3",
    "@ogcio/api-auth": "^5.1.1",
    "@ogcio/building-blocks-sdk": "^0.2.43",
    "@ogcio/fastify-error-handler": "^5.2.1",
    "@ogcio/fastify-logging-wrapper": "^5.2.3",
    "@ogcio/o11y-sdk-node": "^0.2.0",
    "@ogcio/shared-errors": "^1.1.0",
    "@sinclair/typebox": "^0.34.38",
    "fastify": "^5.4.0",
    "fastify-plugin": "^5.0.1",
    "http-errors": "^2.0.0",
    "libphonenumber-js": "^1.12.10",
    "node-polyglot": "^2.6.0",
    "nodemailer": "^7.0.5",
    "pg": "^8.16.3",
    "postgrator": "^8.0.0"
  },
  "devDependencies": {
    "@testcontainers/postgresql": "^11.3.1",
    "@types/http-errors": "^2.0.5",
    "@types/node-polyglot": "^2.5.0",
    "@types/nodemailer": "^6.4.17",
    "@types/pg": "^8.11.11",
    "@usebruno/cli": "^1.38.3",
    "pino-pretty": "^13.0.0"
  }
}
